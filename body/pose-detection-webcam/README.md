# pose-detection-webcam

A simple node that recognizes and visualizes posture using a webcam.

## Usage

This node provides body tracking in a browser environment to recognize body posture.

Basically, we use webcam devices mounted on computers. When a person is recognized on a webcam, 33 landmark coordinates are predicted and visually shown as shown in the picture below.

![image](https://user-images.githubusercontent.com/30489264/136193910-f4508b3b-e7c3-4299-8887-1574f938e101.png)

Specify a posture to save and press the capture button to record the posture model at a specific time. When the posture is captured, the image and coordinate information are displayed. Check the registration status through the `register` and `cancel` buttons.

## Properties

### Server Url

URL address of your websocket server. Server receives the user's posture recognition result in real time using a WebSocket. Do not include a prefix such as 'http://'. This is an attribute input item to facilitate both local and deployment environments.

### Mirror Port

Port number to be used to monitor posture recognition results from other resources. (default: 1881)

### Data Socket Url

Specify the URI including the endpoint when communicating data using the WebSocket. (default: 'ws://localhost:1880/ws/data')

### Camera Test

You can check the webcam screen in advance in the node attribute.

## Example

This is an example of a JSON string of data from a browser through a websocket. Note that if the data is newly registered data, the value of the `regist` is displayed as true.

<details>

<summary>Check the entire JSON string</summary>

```json
{
  "_id": {
    "$oid": "61556cca67071c068857a170"
  },
  "image": {},
  "poseLandmarks": [
    {
      "x": 0.49571552872657776,
      "y": 0.7027847766876221,
      "z": -0.4364425241947174,
      "visibility": 0.999972939491272
    },
    {
      "x": 0.5213351845741272,
      "y": 0.6515322923660278,
      "z": -0.4486660063266754,
      "visibility": 0.9999632239341736
    },
    {
      "x": 0.5345603227615356,
      "y": 0.6547442674636841,
      "z": -0.448456346988678,
      "visibility": 0.9999706149101257
    },
    {
      "x": 0.5493519306182861,
      "y": 0.6586027145385742,
      "z": -0.448108971118927,
      "visibility": 0.9999701976776123
    },
    {
      "x": 0.49673619866371155,
      "y": 0.6415286064147949,
      "z": -0.3911628723144531,
      "visibility": 0.9999364614486694
    },
    {
      "x": 0.49077072739601135,
      "y": 0.6374441981315613,
      "z": -0.39037907123565674,
      "visibility": 0.9999070167541504
    },
    {
      "x": 0.4845333993434906,
      "y": 0.6335997581481934,
      "z": -0.39013972878456116,
      "visibility": 0.9998564720153809
    },
    {
      "x": 0.5890757441520691,
      "y": 0.6841220855712891,
      "z": -0.38090449571609497,
      "visibility": 0.9999675750732422
    },
    {
      "x": 0.5018531084060669,
      "y": 0.6585416793823242,
      "z": -0.1129194125533104,
      "visibility": 0.9998709559440613
    },
    {
      "x": 0.5149452090263367,
      "y": 0.7599643468856812,
      "z": -0.409170001745224,
      "visibility": 0.9999170899391174
    },
    {
      "x": 0.48711079359054565,
      "y": 0.7496805787086487,
      "z": -0.33194297552108765,
      "visibility": 0.9998382925987244
    },
    {
      "x": 0.6963281631469727,
      "y": 0.9493727087974548,
      "z": -0.38864225149154663,
      "visibility": 0.9989435076713562
    },
    {
      "x": 0.4408521056175232,
      "y": 0.9461323022842407,
      "z": 0.10206469148397446,
      "visibility": 0.9962008595466614
    },
    {
      "x": 0.7239233255386353,
      "y": 1.330498218536377,
      "z": -0.6929064989089966,
      "visibility": 0.6368626356124878
    },
    {
      "x": 0.3859536349773407,
      "y": 1.3332369327545166,
      "z": 0.3397621512413025,
      "visibility": 0.04776281863451004
    },
    {
      "x": 0.7005051970481873,
      "y": 0.9732892513275146,
      "z": -0.8355557322502136,
      "visibility": 0.9891335964202881
    },
    {
      "x": 0.36988893151283264,
      "y": 1.560866117477417,
      "z": 0.2589684724807739,
      "visibility": 0.1476515680551529
    },
    {
      "x": 0.736151397228241,
      "y": 0.871178925037384,
      "z": -0.8856658935546875,
      "visibility": 0.9831623435020447
    },
    {
      "x": 0.35022273659706116,
      "y": 1.645777702331543,
      "z": 0.2748843729496002,
      "visibility": 0.2512715458869934
    },
    {
      "x": 0.7294310331344604,
      "y": 0.8264090418815613,
      "z": -0.8240833282470703,
      "visibility": 0.9857907891273499
    },
    {
      "x": 0.3631625175476074,
      "y": 1.6292572021484375,
      "z": 0.2317330539226532,
      "visibility": 0.3592432737350464
    },
    {
      "x": 0.7044625282287598,
      "y": 0.8708523511886597,
      "z": -0.8168489336967468,
      "visibility": 0.9851008057594299
    },
    {
      "x": 0.3759811222553253,
      "y": 1.6007168292999268,
      "z": 0.22979214787483215,
      "visibility": 0.3801347315311432
    },
    {
      "x": 0.6353761553764343,
      "y": 1.678404688835144,
      "z": -0.15833626687526703,
      "visibility": 0.004620702471584082
    },
    {
      "x": 0.44445735216140747,
      "y": 1.6518534421920776,
      "z": 0.1630263477563858,
      "visibility": 0.0026082175318151712
    },
    {
      "x": 0.6097694635391235,
      "y": 2.258247137069702,
      "z": -0.19827619194984436,
      "visibility": 0.00010427249799249694
    },
    {
      "x": 0.4223328232765198,
      "y": 2.222817897796631,
      "z": 0.42111238837242126,
      "visibility": 0.00004239907138980925
    },
    {
      "x": 0.6003370881080627,
      "y": 2.758603096008301,
      "z": 0.16372159123420715,
      "visibility": 0.000007611019555042731
    },
    {
      "x": 0.41866788268089294,
      "y": 2.7363338470458984,
      "z": 0.8053714632987976,
      "visibility": 6.015263238623447e-7
    },
    {
      "x": 0.608555018901825,
      "y": 2.8376400470733643,
      "z": 0.1845891773700714,
      "visibility": 0.000007172476216510404
    },
    {
      "x": 0.41967296600341797,
      "y": 2.8178153038024902,
      "z": 0.8356093168258667,
      "visibility": 0.000002773350388451945
    },
    {
      "x": 0.5526115298271179,
      "y": 2.916771411895752,
      "z": -0.20112769305706024,
      "visibility": 0.000033288732083747163
    },
    {
      "x": 0.42636245489120483,
      "y": 2.905616521835327,
      "z": 0.4743220806121826,
      "visibility": 0.000019161077943863347
    }
  ],
  "poseWorldLandmarks": [
    {
      "x": -0.04314113035798073,
      "y": -0.5568732023239136,
      "z": -0.2147870659828186,
      "visibility": 0.999972939491272
    },
    {
      "x": -0.021963711827993393,
      "y": -0.5950214266777039,
      "z": -0.21838122606277466,
      "visibility": 0.9999632239341736
    },
    {
      "x": -0.022108975797891617,
      "y": -0.5968802571296692,
      "z": -0.21840037405490875,
      "visibility": 0.9999706149101257
    },
    {
      "x": -0.022794177755713463,
      "y": -0.5974685549736023,
      "z": -0.21962743997573853,
      "visibility": 0.9999701976776123
    },
    {
      "x": -0.04578190669417381,
      "y": -0.5929511189460754,
      "z": -0.19422322511672974,
      "visibility": 0.9999364614486694
    },
    {
      "x": -0.04497624933719635,
      "y": -0.5932248830795288,
      "z": -0.19732500612735748,
      "visibility": 0.9999070167541504
    },
    {
      "x": -0.04563097655773163,
      "y": -0.594078004360199,
      "z": -0.19636045396327972,
      "visibility": 0.9998564720153809
    },
    {
      "x": 0.0725591778755188,
      "y": -0.5967340469360352,
      "z": -0.17825643718242645,
      "visibility": 0.9999675750732422
    },
    {
      "x": -0.02901305817067623,
      "y": -0.5933231711387634,
      "z": -0.10243211686611176,
      "visibility": 0.9998709559440613
    },
    {
      "x": -0.009856190532445908,
      "y": -0.5435018539428711,
      "z": -0.20152877271175385,
      "visibility": 0.9999170899391174
    },
    {
      "x": -0.03754746541380882,
      "y": -0.5398073196411133,
      "z": -0.17541730403900146,
      "visibility": 0.9998382925987244
    },
    {
      "x": 0.15178175270557404,
      "y": -0.40910595655441284,
      "z": -0.11986907571554184,
      "visibility": 0.9989435076713562
    },
    {
      "x": -0.11192132532596588,
      "y": -0.42622995376586914,
      "z": -0.033719174563884735,
      "visibility": 0.9962008595466614
    },
    {
      "x": 0.17041634023189545,
      "y": -0.2679927945137024,
      "z": -0.22041980922222137,
      "visibility": 0.6368626356124878
    },
    {
      "x": -0.15199238061904907,
      "y": -0.2373007982969284,
      "z": 0.022910315543413162,
      "visibility": 0.04776281863451004
    },
    {
      "x": 0.15686172246932983,
      "y": -0.4371427297592163,
      "z": -0.31076905131340027,
      "visibility": 0.9891335964202881
    },
    {
      "x": -0.20379357039928436,
      "y": -0.10722651332616806,
      "z": -0.003568431828171015,
      "visibility": 0.1476515680551529
    },
    {
      "x": 0.155186727643013,
      "y": -0.46251344680786133,
      "z": -0.34263429045677185,
      "visibility": 0.9831623435020447
    },
    {
      "x": -0.19510658085346222,
      "y": -0.04280354827642441,
      "z": 0.0065129101276397705,
      "visibility": 0.2512715458869934
    },
    {
      "x": 0.15150393545627594,
      "y": -0.48225137591362,
      "z": -0.3357521891593933,
      "visibility": 0.9857907891273499
    },
    {
      "x": -0.18045955896377563,
      "y": -0.06126078590750694,
      "z": -0.016103597357869148,
      "visibility": 0.3592432737350464
    },
    {
      "x": 0.15484397113323212,
      "y": -0.45172229409217834,
      "z": -0.3082280158996582,
      "visibility": 0.9851008057594299
    },
    {
      "x": -0.18779286742210388,
      "y": -0.09816792607307434,
      "z": -0.017770634964108467,
      "visibility": 0.3801347315311432
    },
    {
      "x": 0.12792301177978516,
      "y": 0.00548890745267272,
      "z": 0.005169777665287256,
      "visibility": 0.004620702471584082
    },
    {
      "x": -0.1269003301858902,
      "y": -0.03930005803704262,
      "z": 0.00047215496306307614,
      "visibility": 0.0026082175318151712
    },
    {
      "x": 0.1404380351305008,
      "y": -0.20625202357769012,
      "z": -0.1654675304889679,
      "visibility": 0.00010427249799249694
    },
    {
      "x": -0.011417031288146973,
      "y": -0.44324856996536255,
      "z": -0.1655106395483017,
      "visibility": 0.00004239907138980925
    },
    {
      "x": 0.16119880974292755,
      "y": 0.05283869057893753,
      "z": 0.07125585526227951,
      "visibility": 0.000007611019555042731
    },
    {
      "x": -0.0618693046271801,
      "y": -0.1715911328792572,
      "z": -0.04589772969484329,
      "visibility": 6.015263238623447e-7
    },
    {
      "x": 0.1423763930797577,
      "y": 0.13506314158439636,
      "z": 0.14910373091697693,
      "visibility": 0.000007172476216510404
    },
    {
      "x": -0.10230283439159393,
      "y": -0.08790212869644165,
      "z": 0.07421988993883133,
      "visibility": 0.000002773350388451945
    },
    {
      "x": 0.3420045077800751,
      "y": -0.3686513304710388,
      "z": -0.2581872045993805,
      "visibility": 0.000033288732083747163
    },
    {
      "x": -0.025876006111502647,
      "y": -0.49034392833709717,
      "z": -0.3897445797920227,
      "visibility": 0.000019161077943863347
    }
  ],
  "segmentationMask": {},
  "regist": true,
  "poseName": "Pose Example 1"
}
```

</details>